let mapSourceRaw=[];AFRAME.registerComponent("room",{schema:{wallColor:{type:"string",default:"white"},floorColor:{type:"string",default:"white"},wallTexture:{type:"string",default:"none"},scale:{type:"string",default:"1 1 1"},wallSize:{type:"string",default:"1"},wallHeight:{type:"string",default:"3"},mapToLoad:{type:"string",default:"map"},mapSource:{type:"array",default:[]}},init:async function(){await this.loadData()},loadData:async function(){let t=this.data,e=t.mapToLoad;await this.loadMap(e),await this.createRooms()},loadMap:async function t(e){this.data;let a=await fetch(e+".json");mapSourceRaw=await a.json(),this.data.mapSource=mapSourceRaw},createRooms:function(){let t=this.data,e=this.data.mapSource,a=t.wallTexture;t.scale,t.scale;let i=t.wallColor,o=t.floorColor,r=t.wallSize,s=t.wallHeight;console.log(e,r,s,e.height);for(let l=0;l<e.height;l++)for(let h=0;h<e.width;h++){console.log("room running");let u=h*e.width+l,d=`${(l-e.width/2)*r} 0 ${(h-e.height/2)*r}`,n=`${(l-e.width/2)*r} ${s/2} ${(h-e.height/2)*r}`,c=`${(l-e.width/2)*r} 1 ${(h-e.height/2)*r}`,b=`${(l-e.width/2)*r} 0 ${(h-e.height/2)*r}`;(0===e.data[u]||1===e.data[u]||2==e.data[u]||3===e.data[u])&&((wall=document.createElement("a-box")).setAttribute("width",r),wall.setAttribute("height",s),wall.setAttribute("depth",r),wall.setAttribute("position",n),wall.setAttribute("material","src:#"+a),this.el.appendChild(wall),0===e.data[u]&&(wall.setAttribute("color",o),wall.setAttribute("height",s/20),wall.setAttribute("static-body",""),wall.setAttribute("position",d)),1===e.data[u]&&(wall.setAttribute("color",i),wall.setAttribute("height",s),wall.setAttribute("static-body",""),wall.setAttribute("position",n),wall.setAttribute("material","src:#"+a)),2===e.data[u]&&(wall.setAttribute("color",i),wall.setAttribute("height",s/2),wall.setAttribute("static-body",""),wall.setAttribute("position",c),wall.setAttribute("material","src:#"+a)),3===e.data[u]&&(wall.setAttribute("color",i),wall.setAttribute("height",s/4),wall.setAttribute("static-body",""),wall.setAttribute("position",b),wall.setAttribute("material","src:#"+a)))}}});